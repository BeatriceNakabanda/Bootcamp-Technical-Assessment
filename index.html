<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Technical Assessment - TDD, OOP, SOLID, UML</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwfdgtOwmLMEAaZ5mqd9IaGe16X1WCD7BGbpOT76BPj6Z6bKQnvUqAd02rLZx4dYs4O/exec';

        const Clock = () => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>);
        const AlertTriangle = () => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>);
        const CheckCircle = () => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>);
        const Download = () => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>);
        const ChevronLeft = () => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="15 18 9 12 15 6"/></svg>);
        const ChevronRight = () => (<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><polyline points="9 18 15 12 9 6"/></svg>);

        function AssessmentPlatform() {
            const [started, setStarted] = useState(false);
            const [studentInfo, setStudentInfo] = useState({ name: '', email: '', track: '' });
            const [currentSection, setCurrentSection] = useState(0);
            const [currentQuestion, setCurrentQuestion] = useState(0);
            const [answers, setAnswers] = useState({});
            const [timeRemaining, setTimeRemaining] = useState(2 * 60 * 60);
            const [completed, setCompleted] = useState(false);
            const [results, setResults] = useState(null);

            const sections = [
                {
                    name: "Object-Oriented Programming",
                    questions: [
                        { id: "oop_1", type: "multiple", question: "List the 4 main pillars of OOP?", options: ["Classes, Objects, Methods, Properties", "Encapsulation, Inheritance, Polymorphism, Abstraction", "Variables, Functions, Loops, Conditions"], correct: 1 },
                        { id: "oop_2", type: "multiple", question: "What is the term used to describe the process of hiding internal details and showing only functionalities?", options: ["Encapsulation", "Inheritance", "Abstraction", "Polymorphism"], correct: 2 },
                        { id: "oop_3", type: "multiple", question: "What is a class in OOP?", options: ["An instance of an object", "A blueprint for creating objects", "A method that returns a value"], correct: 1 },
                        { id: "oop_4", type: "multiple", question: "Which of these keywords is used to create an object in most OOP languages?", options: ["create", "new", "instance"], correct: 1 },
                        { id: "oop_5", type: "multiple", question: "What does encapsulation help to achieve?", options: ["Creating multiple instances of a class", "Data hiding and bundling of data with methods", "Inheriting properties from parent classes"], correct: 1 },
                        { id: "oop_6", type: "multiple", question: "Which concept allows a class to use properties and methods of another class?", options: ["Polymorphism", "Inheritance", "Encapsulation"], correct: 1 },
                        { id: "oop_7", type: "multiple", question: "Which of the following best describes polymorphism?", options: ["The process of hiding data", "The ability of objects to take many forms", "Creating blueprints for objects"], correct: 1 },
                        { id: "oop_8", type: "multiple", question: "What is an object in OOP?", options: ["A blueprint for creating classes", "An instance of a class", "A method that returns data"], correct: 1 },
                        { id: "oop_9", type: "multiple", question: "Inheritance in OOP allows for:", options: ["Hiding implementation details", "Code reusability and establishing relationships between classes", "Creating multiple objects at once"], correct: 1 }
                    ]
                },
                {
                    name: "Test-Driven Development",
                    questions: [
                        { id: "tdd_1", type: "multiple", question: "What is the correct sequence of steps in the TDD cycle?", options: ["Write code, Write test, Run test, Refactor", "Write test, Run test (fail), Write code, Run test (pass), Refactor", "Design, Code, Test, Deploy"], correct: 1 },
                        { id: "tdd_2", type: "multiple", question: "In TDD, when should you write your tests?", options: ["After writing the implementation code", "Before writing the implementation code", "During code review"], correct: 1 },
                        { id: "tdd_3", type: "multiple", question: "What is the first thing you expect when you run a newly written test in TDD?", options: ["The test should pass", "The test should fail", "The test should skip"], correct: 1 },
                        { id: "tdd_4", type: "multiple", question: "What is the main goal of TDD?", options: ["To write tests as fast as possible", "To write clean, working code with good test coverage", "To avoid writing documentation"], correct: 1 },
                        { id: "tdd_5", type: "multiple", question: "What kind of tests are usually written in TDD?", options: ["Manual tests", "Unit tests", "Visual tests"], correct: 1 },
                        { id: "tdd_6", type: "multiple", question: "You write a test, then code, and then it passes. What approach is this?", options: ["Code-First Development", "Test-Driven Development", "Waterfall Development"], correct: 1 },
                        { id: "tdd_7", type: "multiple", question: "What is meant by the term refactor in TDD?", options: ["Adding new features to the code", "Improving code structure without changing functionality", "Removing all tests"], correct: 1 },
                        { id: "tdd_8", type: "multiple", question: "In TDD, a test case is said to pass when:", options: ["The code compiles without errors", "The actual output matches the expected output", "The test runs without crashing"], correct: 1 },
                        { id: "tdd_9", type: "multiple", question: "Which of the following is NOT true about TDD?", options: ["It helps catch bugs early", "Tests are written after all features are complete", "It encourages modular code design"], correct: 1 }
                    ]
                },
                {
                    name: "SOLID Principles",
                    questions: [
                        { id: "solid_1", type: "multiple", question: "What does the S in SOLID stand for?", options: ["Software Responsibility Principle", "Single Responsibility Principle", "System Responsibility Principle"], correct: 1 },
                        { id: "solid_2", type: "multiple", question: "According to the Single Responsibility Principle, a class should:", options: ["Have only one method", "Have only one reason to change", "Inherit from only one parent class"], correct: 1 },
                        { id: "solid_3", type: "multiple", question: "What is the main idea of the Open/Closed Principle?", options: ["Classes should be open to the public", "Software entities should be open for extension but closed for modification", "Methods should be either open or closed"], correct: 1 },
                        { id: "solid_4", type: "multiple", question: "Which principle says that a subclass should be replaceable for its superclass?", options: ["Single Responsibility Principle", "Liskov Substitution Principle", "Interface Segregation Principle"], correct: 1 },
                        { id: "solid_5", type: "multiple", question: "What does the Interface Segregation Principle suggest?", options: ["All interfaces should be segregated into separate files", "Clients should not be forced to depend on interfaces they do not use", "Interfaces should have as many methods as possible"], correct: 1 },
                        { id: "solid_6", type: "multiple", question: "The Dependency Inversion Principle promotes:", options: ["Inverting the order of dependencies in code", "Depending on abstractions rather than concrete implementations", "Avoiding all dependencies between classes"], correct: 1 }
                    ]
                },
                {
                    name: "UML Diagrams",
                    questions: [
                        { id: "uml_1", type: "multiple", question: "What is the primary purpose of UML?", options: ["To write code faster", "To visualize, specify, construct, and document software systems", "To replace programming languages"], correct: 1 },
                        { id: "uml_2", type: "multiple", question: "Which of the following is not a type of UML diagram?", options: ["Class Diagram", "Flow Chart Diagram", "Use Case Diagram"], correct: 1 },
                        { id: "uml_3", type: "multiple", question: "Why is it useful to draw UML diagrams before writing code?", options: ["It makes coding unnecessary", "It helps plan and visualize the system structure and behavior", "It automatically generates code"], correct: 1 },
                        { id: "uml_4", type: "multiple", question: "A class diagram shows the flow of actions in a system", options: ["True", "False"], correct: 1 },
                        { id: "uml_5", type: "multiple", question: "What does a use case diagram represent?", options: ["The internal structure of classes", "The functional requirements and interactions between users and system", "The sequence of method calls"], correct: 1 },
                        { id: "uml_6", type: "multiple", question: "Which UML diagram shows the static structure of a system?", options: ["Activity Diagram", "Class Diagram", "Sequence Diagram"], correct: 1 },
                        { id: "uml_7", type: "multiple", question: "In a use case diagram, the user is represented as:", options: ["A circle", "An actor", "A rectangle"], correct: 1 },
                        { id: "uml_8", type: "multiple", question: "What is the purpose of an activity diagram?", options: ["To show class relationships", "To show the flow of activities and decisions in a process", "To show user interactions"], correct: 1 },
                        { id: "uml_9", type: "multiple", question: "Which UML diagram shows the interaction between objects over time?", options: ["Class Diagram", "Sequence Diagram", "Use Case Diagram"], correct: 1 },
                        { id: "uml_10", type: "multiple", question: "In a class diagram, what symbol represents inheritance?", options: ["A dotted line", "A line with an empty triangle pointing to the parent class", "A solid line with no arrow"], correct: 1 },
                        { id: "uml_11", type: "multiple", question: "Which tools can be used to draw UML diagrams?", options: ["Microsoft Word only", "Lucidchart, Draw.io, Visual Paradigm", "Notepad"], correct: 1 }
                    ]
                },
                {
                    name: "Coding Challenge",
                    forTrack: true,
                    questions: [
                        { 
                            id: "code_python", 
                            type: "code", 
                            track: "python",
                            question: "Write a function called add that takes two numbers and returns their sum. Then write at least 2 test cases using assertions to verify it works correctly. Follow TDD principles.",
                            baseCode: `# Step 1: Write your test cases first\n# Example: assert add(2, 3) == 5\n\n# TODO: Write at least 2 test cases here\n\n\n# Step 2: Write the function to make tests pass\ndef add(a, b):\n    # TODO: Implement the function\n    pass\n\n\n# Step 3: Run your tests\n# Uncomment the line below when ready\n# print("All tests passed!")`
                        },
                        { 
                            id: "code_javascript", 
                            type: "code",
                            track: "javascript",
                            question: "Write a function called add that takes two numbers and returns their sum. Then write at least 2 test cases to verify it works correctly. Follow TDD principles.",
                            baseCode: `// Step 1: Write your test cases first\n// Example test function\nfunction testAdd() {\n    // TODO: Write at least 2 test cases here\n    // Use console.assert() or simple if statements\n    \n}\n\n// Step 2: Write the function to make tests pass\nfunction add(a, b) {\n    // TODO: Implement the function\n}\n\n// Step 3: Run your tests\n// Uncomment the line below when ready\n// testAdd();\n// console.log("All tests passed!");`
                        }
                    ]
                }
            ];

            const getFilteredSections = () => sections.map(s => s.forTrack ? { ...s, questions: s.questions.filter(q => q.track === studentInfo.track) } : s).filter(s => s.questions.length > 0);

            useEffect(() => {
                if (started && !completed) {
                    const h = (e) => { e.preventDefault(); e.returnValue = ''; };
                    window.addEventListener('beforeunload', h);
                    return () => window.removeEventListener('beforeunload', h);
                }
            }, [started, completed]);

            useEffect(() => {
                if (started && !completed && timeRemaining > 0) {
                    const t = setInterval(() => setTimeRemaining(p => p <= 1 ? (handleSubmit(), 0) : p - 1), 1000);
                    return () => clearInterval(t);
                }
            }, [started, completed, timeRemaining]);

            const formatTime = (s) => `${Math.floor(s/3600).toString().padStart(2,'0')}:${Math.floor((s%3600)/60).toString().padStart(2,'0')}:${(s%60).toString().padStart(2,'0')}`;

            const calculateResults = () => {
                let c = 0, t = 0;
                getFilteredSections().forEach(s => s.questions.forEach(q => { if (q.type === 'multiple') { t++; if (answers[q.id] === q.correct) c++; }}));
                return { correct: c, total: t, percentage: t > 0 ? Math.round((c / t) * 100) : 0 };
            };

            const handleSubmit = () => { 
                const r = calculateResults(); 
                setResults(r); 
                setCompleted(true); 
                fetch(GOOGLE_SCRIPT_URL, { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ timestamp: new Date().toISOString(), fullName: studentInfo.name, email: studentInfo.email, track: studentInfo.track, score: `${r.correct}/${r.total}`, percentage: `${r.percentage}%`, timeUsed: formatTime(7200 - timeRemaining), ...answers })}).catch(e => console.error(e));
            };

            const downloadCSV = () => {
                let csv = `Full Name,Email,Track,Score,Percentage\n${studentInfo.name},${studentInfo.email},${studentInfo.track},${results.correct}/${results.total},${results.percentage}%\n\nQuestion,Answer\n`;
                Object.entries(answers).forEach(([k, v]) => csv += `${k},"${typeof v === 'string' ? v.replace(/,/g, ';').replace(/\n/g, ' ') : v}"\n`);
                const a = document.createElement('a');
                a.href = URL.createObjectURL(new Blob([csv], { type: 'text/csv' }));
                a.download = `assessment_${Date.now()}.csv`;
                a.click();
            };

            const getTotalQ = () => getFilteredSections().reduce((s, sec) => s + sec.questions.length, 0);
            const getCurrentQ = () => { const f = getFilteredSections(); let c = 0; for (let i = 0; i < currentSection; i++) c += f[i].questions.length; return c + currentQuestion + 1; };
            const getProgress = () => (getCurrentQ() / getTotalQ()) * 100;

            if (!started) return (<div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4"><div className="bg-white rounded-2xl shadow-2xl p-8 max-w-2xl w-full"><h1 className="text-4xl font-bold text-center mb-2">Technical Assessment</h1><p className="text-center text-gray-600 mb-6">TDD, OOP, SOLID and UML</p><div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6"><div className="flex"><AlertTriangle /><div className="ml-3"><h3 className="font-semibold text-yellow-800">Important:</h3><ul className="text-sm text-yellow-700 space-y-1"><li>• Time: 2 hours</li><li>• Don't leave page</li><li>• Edit code directly</li></ul></div></div></div><div className="space-y-4 mb-6"><input type="text" placeholder="Full Name *" className="w-full px-4 py-3 border rounded-lg" value={studentInfo.name} onChange={e => setStudentInfo(p => ({...p, name: e.target.value}))} /><input type="email" placeholder="Email *" className="w-full px-4 py-3 border rounded-lg" value={studentInfo.email} onChange={e => setStudentInfo(p => ({...p, email: e.target.value}))} /><select className="w-full px-4 py-3 border rounded-lg bg-white" value={studentInfo.track} onChange={e => setStudentInfo(p => ({...p, track: e.target.value}))}><option value="">Choose track...</option><option value="python">Python</option><option value="javascript">JavaScript</option></select></div><button onClick={() => studentInfo.name && studentInfo.email && studentInfo.track && setStarted(true)} disabled={!studentInfo.name || !studentInfo.email || !studentInfo.track} className="w-full bg-blue-600 text-white py-4 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-300">Start Assessment</button></div></div>);

            if (completed) return (<div className="min-h-screen bg-gradient-to-br from-green-50 to-blue-100 p-4"><div className="max-w-3xl mx-auto bg-white rounded-2xl shadow-2xl p-8"><div className="text-center mb-6"><CheckCircle className="w-20 h-20 text-green-500 mx-auto mb-4" /><h1 className="text-4xl font-bold">Assessment Submitted!</h1><p className="text-xl text-gray-600 mt-2">{studentInfo.name}</p></div><div className="bg-blue-50 p-6 rounded-lg mb-6 text-center"><h2 className="text-xl font-semibold mb-4">Your Score</h2><p className="text-5xl font-bold text-blue-600">{results.correct} / {results.total}</p><p className="text-3xl text-gray-700 mt-2">{results.percentage}%</p></div><div className="bg-gray-50 p-4 rounded-lg mb-6 text-center"><p className="text-gray-700">Coding questions will be reviewed by your coach.</p></div><button onClick={downloadCSV} className="w-full flex items-center justify-center gap-2 bg-green-600 text-white px-6 py-4 rounded-lg font-semibold hover:bg-green-700"><Download />Download CSV</button></div></div>);

            const f = getFilteredSections(), sec = f[currentSection], q = sec.questions[currentQuestion];

            return (<div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100"><div className="bg-white shadow-lg sticky top-0 z-10"><div className="max-w-5xl mx-auto px-6 py-4"><div className="flex justify-between items-center"><div><h1 className="text-2xl font-bold">Technical Assessment</h1><p className="text-sm text-gray-600">{studentInfo.name} - {studentInfo.track.toUpperCase()}</p></div><div className="flex items-center gap-2"><Clock /><span className={`text-2xl font-bold ${timeRemaining < 600 ? 'text-red-600' : 'text-gray-900'}`}>{formatTime(timeRemaining)}</span></div></div><div className="mt-4"><div className="flex justify-between text-sm text-gray-600 mb-2"><span>Question {getCurrentQ()} of {getTotalQ()}</span><span>{Math.round(getProgress())}%</span></div><div className="w-full bg-gray-200 rounded-full h-3"><div className="bg-blue-600 h-3 rounded-full" style={{width: `${getProgress()}%`}} /></div></div></div></div><div className="max-w-4xl mx-auto p-6"><div className="bg-white rounded-2xl shadow-xl p-8"><div className="mb-6"><div className="inline-block bg-blue-100 text-blue-800 px-4 py-2 rounded-full text-sm font-semibold mb-4">{sec.name}</div><h2 className="text-2xl font-bold">Question {getCurrentQ()}</h2></div><div className="mb-8"><p className="text-lg text-gray-800">{q.question}</p></div>{q.type === 'multiple' ? (<div className="space-y-3">{q.options.map((o, i) => (<label key={i} className={`flex items-center p-4 border-2 rounded-lg cursor-pointer ${answers[q.id] === i ? 'border-blue-600 bg-blue-50' : 'border-gray-200 hover:border-blue-300'}`}><input type="radio" checked={answers[q.id] === i} onChange={() => setAnswers(p => ({...p, [q.id]: i}))} className="w-5 h-5" /><span className="ml-3">{o}</span></label>))}</div>) : (<div><div className="bg-gray-800 rounded-t-lg px-4 py-2"><span className="text-sm text-gray-200 font-semibold">Code Editor</span></div><textarea value={answers[q.id] || q.baseCode} onChange={e => setAnswers(p => ({...p, [q.id]: e.target.value}))} className="w-full h-96 p-4 border-2 border-gray-300 rounded-b-lg font-mono text-sm bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500" spellCheck={false} /></div>)}<div className="flex justify-between mt-8 pt-6 border-t"><button onClick={() => { if (currentQuestion > 0) setCurrentQuestion(currentQuestion - 1); else if (currentSection > 0) { setCurrentSection(currentSection - 1); setCurrentQuestion(f[currentSection - 1].questions.length - 1); }}} disabled={currentSection === 0 && currentQuestion === 0} className="flex items-center gap-2 px-6 py-3 bg-gray-200 rounded-lg font-semibold hover:bg-gray-300 disabled:opacity-50"><ChevronLeft />Previous</button>{currentSection === f.length - 1 && currentQuestion === f[currentSection].questions.length - 1 ? (<button onClick={handleSubmit} className="px-8 py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700">Submit</button>) : (<button onClick={() => { if (currentQuestion < sec.questions.length - 1) setCurrentQuestion(currentQuestion + 1); else { setCurrentSection(currentSection + 1); setCurrentQuestion(0); }}} className="flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700">Next<ChevronRight /></button>)}</div></div></div></div>);
        }

        ReactDOM.render(<AssessmentPlatform />, document.getElementById('root'));
    </script>
</body>
</html>
